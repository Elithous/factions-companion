@use "sass:color";
@use '../../app/globals.scss' as global;

// Variables
:root {
  --stats-padding: var(--spacing-sm);
  --stats-border-width: 2px;
  --stats-hover-opacity: 0.1;
  --stats-cell-padding: var(--spacing-xs) var(--spacing-sm);
  --stats-transition: var(--transition-normal);
}

// Container Layout
.stats-container {
  display: flex;
  flex-wrap: wrap;
  text-align: center;
  gap: var(--spacing-lg);
  padding: var(--spacing-md);
}

// Totals Sections
.faction-totals,
.filtered-totals {
  padding: var(--stats-padding);
  margin: auto;
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: var(--radius-md);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: transform var(--stats-transition), box-shadow var(--stats-transition);
}

.filtered-totals {
  .filters {
    display: flex;
    width: 100%;
    flex-direction: column;
    gap: var(--spacing-sm);
  }
}

// Stats Table
.stats-table {
  margin: auto;
  border-collapse: separate;
  border-spacing: 0;
  border-radius: var(--radius-md);
  overflow: hidden;

  .title {
    text-align: center;
    font-size: 1.25rem;
    font-weight: 600;
    padding: var(--spacing-md);
    color: var(--text-color);
  }

  tbody {
    border: var(--stats-border-width) solid var(--orange-900);
  }
}

// Stats Row
.stats-row {
  transition: background-color var(--stats-transition);

  &:hover {
    background-color: rgba(0, 0, 0, var(--stats-hover-opacity));
    .total {
      background-color: var(--orange-800);
    }

    .faction,
    .fill {
      &.BLUE { background-color: color.adjust(global.$faction-blue, $lightness: -5%); }
      &.RED { background-color: color.adjust(global.$faction-red, $lightness: -5%); }
      &.GREEN { background-color: color.adjust(global.$faction-green, $lightness: -5%); }
      &.YELLOW { background-color: color.adjust(global.$faction-yellow, $lightness: -5%); }
      &.NEUTRAL { background-color: color.adjust(global.$faction-neutral, $lightness: -10%); }
    }
  }

  // Faction Colors
  .faction,
  .fill {
    @mixin faction-color($color) {
      background-color: $color;
      transition: background-color var(--stats-transition);
    }

    &.BLUE { @include faction-color(global.$faction-blue); }
    &.RED { @include faction-color(global.$faction-red); }
    &.GREEN { @include faction-color(global.$faction-green); }
    &.YELLOW { @include faction-color(global.$faction-yellow); }
    &.NEUTRAL { @include faction-color(global.$faction-neutral); }
  }

  // Total Column
  .total {
    padding: var(--stats-cell-padding);
    position: relative;
    background-color: var(--orange-700);
    transition: background-color var(--stats-transition);

    .value {
      text-align: right;
      z-index: 1;
      position: relative;
      font-weight: 500;
    }

    .fill {
      top: 0;
      left: 0;
      height: 100%;
      position: absolute;
    }
  }

  // Faction Column
  .faction {
    text-align: center;
    padding: var(--stats-cell-padding);
    font-weight: 500;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  }
}

// Responsive Design
@media (max-width: 768px) {
  .stats-container {
    flex-direction: column;
  }

  .stats-table {
    font-size: 0.9rem;
  }

  .faction-totals,
  .filtered-totals {
    width: 100%;
  }
}